<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Skunkland Server</title>
		<link rel="stylesheet" href="../data/mc.css">
		<link rel="icon" href="../images/pickaxe.png" type="image/x-icon">
		<script src="../data/time.js"></script>
		<script src="../data/header.js"></script>
	</head>
	<body>
		<header><script>insertHeader();</script></header>
		<main>
			<div class="contentheader round">The Skunkland Newsletter</div>
			<p><b>Latest Newsletter:</b> <span id='latestNews'></span></p>
			<p>
				As part of the Skunkland server community we release a newsletter about the goings on of the 
				server every few months. These newsletters keep players up to date on new developments in the 
				game, what other players are working on, and current build areas. If you would like to include 
				something in a future newsletter please contact thursiya.
			</p>
			<br>

			<div class="contentheader round">Newsletter Archive</div>
			<div class="row">
				<div id="leftcol" class="col-6"></div>
				<div id="rightcol" class="col-6"></div>
			</div>
		</main>
		<script>
			const n = [];
			loadDoc("../data/newsletter.txt", buildNewsletterArray);	
			
			function loadDoc(url, cFunction) {
  				const xhttp = new XMLHttpRequest();
  				xhttp.onload = function() {cFunction(this);}
  				xhttp.open("GET", url);
  				xhttp.send();
			}

			function buildNewsletterArray(xhr) {
				n.push(...xhr.response.split('\n').pop().reverse());
				document.getElementById('latestNews').innerHTML = `<a href="news${n.length-1}.htm" target="_blank"><i>${n[0]}</i></a>`;
				let out = "";
				for (let i = 0; i < n.length; i++) {
					out += `<li><a href="news${n.length - i - 1}.htm" target="_blank">${n[i]}</a>`;
					if (i == ~~(n.length / 2)) {
						document.getElementById('leftcol').innerHTML = out;
						out = "";
					}
				}
				document.getElementById('rightcol').innerHTML = out;
			}
		</script>
	</body>
</html>
