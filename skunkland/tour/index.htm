<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Skunkland Server</title>
		<link rel="stylesheet" href="../data/mc.css">
		<link rel="icon" href="../images/pickaxe.png" type="image/x-icon">
		<script src="../data/time.js"></script>
		<script src="../data/header.js"></script>
	</head>
	<body>
		<header><script>insertHeader();</script></header>
		<main>
			<div class="content round shadow">
				<div class="contentheader round">Tour of Skunkland</div>
				<p>
					Want to get acquainted with our lovely server? What better way than a tour by way of our subway
					system! Our tour starts at spawn and you can click subway exits to learn more about the areas 
					around the subway stations.
				</p>
				<br>

				<div id="station"></div>
				
				<div style="clear:both"></div>
			</div>
		</main>
		<script>
			const s = [];
			loadDoc("../data/tour.txt", buildTourArray);	
			
			function loadDoc(url, cFunction) {
  				const xhttp = new XMLHttpRequest();
  				xhttp.onload = function() {cFunction(this);}
  				xhttp.open("GET", url);
  				xhttp.send();
			}

			function buildTourArray(xhr) {
				s.push(...JSON.parse(xhr.response.replace(/(\s*{\s*|\s*,\s*)(['"])?(\w+)(['"])?:/g, '$1"$3":')));
				console.log(s);
				loadDest("Spawn");
			}

			function loadDest(id) {
				const d = s.find(v => v.name == id);
				document.getElementById("station").innerHTML = `
    					<div class="contentheader round">${d.name} Station</div>
					<table style="float:right">
						<tr>
							<td id="nw" width="140" height="90"></td>
							<td id="n" width="140"></td>
							<td id="ne" width="140"></td>
						</tr>
						<tr>
							<td id="w" width="140" height="90"></td>
							<th width="140">${d.name}<br><span style="font-size:80%">Station</span></th>
							<td id="e" width="140"></td>
						</tr>
						<tr>
							<td id="sw" width="140" height="90"></td>
							<td id="s" width="140"></td>
							<td id="se" width="140"></td>
						</tr>
					</table>
					<img src="../gallery/images/${d.img || d.name}.jpg" alt="${d.img || d.name}" height="275">
					<br>
					<p>${d.desc}</p>
					<p>Close by: ${d.near}</p>`;
				Object.keys(d.link).forEach(v => document.getElementById(v).innerHTML = `<a onclick="loadDest('${d.link[v]}')">${d.link[v]}</a>`);
			}
		</script>
	</body>
</html>
			

<!--   *** Touring Script ***   

<script type="text/javascript">
	// Identify Station
	var url = self.location.search;
	var station = decodeURI(url.substring(url.lastIndexOf('?') + 1)) || "Spawn";
	var s1 = "<span style='font-size:80%'>";
	var s2 = "</span><br><br><a href='?";
	var s3 = "</a><br><br>";
	var sflight = s1 + "&#9992; FLIGHT &#9992;" + s2;
	
	// Reset Corner Station Borders
	northwest.style.border = "none";
	northeast.style.border = "none";
	southwest.style.border = "none";
	southeast.style.border = "none";
	

		case "Celestia":
			sdat = ["Celestia Corolla","This is the hub station of the Thurail Subway network which is why it has eight exits.  It is located at the heart of the city of Celestia (Tercomciel province, Gavel).","City of Celestia","","Zefram","Mellon Bay","Funland"];
			//northwest.innerHTML = s1 + "-- NORTHWEST --" + s2 + "Navy Base'>Navy Base" + s3;
			//northwest.style.border = "1px solid black";
			northeast.innerHTML = s1 + "-- NORTHEAST --" + s2 + "Persson Airport'>Persson Airport" + s3;
			northeast.style.border = "1px solid black";
			//southwest.innerHTML = s1 + "-- SOUTHWEST --" + s2 + "Casino'>Casino" + s3;
			//southwest.style.border = "1px solid black";
			southeast.innerHTML = s1 + "-- SOUTHEAST --" + s2 + "Baths Palace'>Baths Palace" + s3;
			southeast.style.border = "1px solid black";
			break;

	
	var stationpic = sdat[0],
		stationtext = sdat[1],
		nearsites = sdat[2],
		northExit = sdat[3],
		westExit = sdat[4],
		eastExit = sdat[5],
		southExit = sdat[6];
		
	// Display Station Header, Picture & Info
	stationheader.innerHTML = station + " Station";
	picture.src = "gallery/images/" + stationpic + ".jpg";
	flavour.innerHTML = stationtext;
	nearby.innerHTML = "Close by: " + nearsites;
		
	// Display Station Selector
	northExit ? north.innerHTML = s1 + "---- NORTH ----" + s2 + northExit + "'>" + northExit + s3 : north.style.border = "none";
	westExit ? west.innerHTML = s1 + "---- WEST ----" + s2 + westExit + "'>" + westExit + s3 : west.style.border = "none";
	eastExit ? east.innerHTML = s1 + "---- EAST ----" + s2 + eastExit + "'>" + eastExit + s3 : east.style.border = "none";
	southExit ? south.innerHTML = s1 + "---- SOUTH ----" + s2 + southExit + "'>" + southExit + s3 : south.style.border = "none";
	stationName.innerHTML = station;

	

-->
